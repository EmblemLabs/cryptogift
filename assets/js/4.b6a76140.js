(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{130:function(e,t,r){},192:function(e,t,r){"use strict";var n=r(130);r.n(n).a},196:function(e,t,r){"use strict";r.r(t);r(124);var n=r(125),i=r(131),o=r(132),a=r(136),s={name:"GiftViewer",mixins:[i.a,o.a,a.a],data:function(){return{loading:!0,playerVars:{autoplay:0,rel:0,controls:0,showinfo:0},encryptionKey:"",currentToken:{loaded:!1,visible:!1,id:0,amount:0,content:{sender:"",receiver:"",message:""},date:"",style:""}}},mounted:function(){var e=Object(n.a)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.currentNetwork=this.getParam("network")||this.network.default,e.next=3,this.initDapp();case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),methods:{initDapp:function(){var e=Object(n.a)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.network.current=this.network.list[this.currentNetwork],e.prev=1,e.next=4,this.initWeb3(this.currentNetwork,!0);case 4:this.initContracts(),this.loading=!1,e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),alert(e.t0),document.location.href=this.$withBase("/");case 12:case"end":return e.stop()}},e,this,[[1,8]])}));return function(){return e.apply(this,arguments)}}(),ready:function(){this.currentToken.id=this.getParam("id"),this.getTokenVisibility()},getTokenVisibility:function(){var e=this;this.instances.token.isVisible(this.currentToken.id,function(t,r){if(t)return alert("Some error"),void(e.loading=!1);e.currentToken.visible=r[0],e.currentToken.visible||(e.currentToken.date=1e3*r[1].valueOf(),e.currentToken.formattedDate=new Date(e.currentToken.date).toLocaleString()),e.loading=!1})},getToken:function(){var e=this;this.$validator.validateAll().then(function(){var t=Object(n.a)(regeneratorRuntime.mark(function t(r){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r)try{e.instances.token.getGift(e.currentToken.id,function(t,r){if(t)return alert("Some error"),void(e.loading=!1);e.formatStructure(r)})}catch(e){alert("Some error occurred. Check your Encryption Key")}case 1:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}())},formatStructure:function(e){this.currentToken.amount=parseFloat(this.web3.fromWei(e[0])),this.currentToken.purchaser=e[1],this.currentToken.beneficiary=e[2],this.currentToken.content=JSON.parse(JSON.parse(this.web3.toAscii(this.decrypt(e[3],this.encryptionKey)))),this.currentToken.date=1e3*e[4].valueOf(),this.currentToken.formattedDate=new Date(this.currentToken.date).toLocaleString(),this.currentToken.style=e[5],this.currentToken.visible=!0,this.currentToken.loaded=!0}}},c=(r(192),r(4)),u=Object(c.a)(s,function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.loading?e._e():r("div",[r("b-row",[r("b-col",{attrs:{lg:"8","offset-lg":"2"}},[r("b-card",{staticClass:"shadow-lg",attrs:{"img-src":e.$withBase("assets/images/cryptogift-og.jpg"),"no-body":""}},[e.currentToken.visible?[e.currentToken.loaded?[r("h4",{attrs:{slot:"header"},slot:"header"},[e._v("For "+e._s(e.currentToken.content.receiver))]),e._v(" "),r("b-card-body",[r("p",{staticClass:"card-test"},[e._v(e._s(e.currentToken.content.message))])]),e._v(" "),r("b-card-footer",[r("small",{staticClass:"text-muted"},[r("strong",[e._v(e._s(e.currentToken.amount)+" ETH")]),e._v(", From "),r("strong",[e._v(e._s(e.currentToken.content.sender))]),e._v(" on "),r("strong",[e._v(e._s(e.currentToken.formattedDate))])])])]:[r("b-card-body",[r("b-form",{on:{submit:function(t){return t.preventDefault(),e.getToken(t)}}},[r("b-form-group",{attrs:{id:"gift-encryption-key-group",label:"Encryption Key:","label-for":"gift-encryption-key",description:"Insert the Encryption Key"}},[r("b-form-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:{"is-invalid":e.errors.has("gift-encryption-key")},attrs:{id:"gift-encryption-key",name:"gift-encryption-key",type:"password"},model:{value:e.encryptionKey,callback:function(t){e.encryptionKey=t},expression:"encryptionKey"}})],1),e._v(" "),r("b-button",{attrs:{type:"submit",variant:"outline-success",size:"lg"}},[e._v("Decrypt your Gift")])],1)],1)]]:[r("b-card-body",[e.currentToken.date?r("p",{staticClass:"card-test"},[e._v("Gift will be visible on "+e._s(e.currentToken.formattedDate))]):r("p",{staticClass:"card-test"},[e._v("Gift doesn't exist")])])]],2)],1)],1)],1)},[],!1,null,null,null);u.options.__file="GiftViewer.vue";t.default=u.exports}}]);