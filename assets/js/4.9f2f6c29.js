(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{130:function(t,e,r){},192:function(t,e,r){"use strict";var n=r(130);r.n(n).a},196:function(t,e,r){"use strict";r.r(e);r(124);var n=r(125),i=r(131),o=r(132),a=r(136),s={name:"GiftViewer",mixins:[i.a,o.a,a.a],data:function(){return{loading:!0,playerVars:{autoplay:0,rel:0,controls:0,showinfo:0},encryptionKey:"",currentToken:{loaded:!1,visible:!1,id:0,amount:0,content:{sender:"",receiver:"",message:""},date:"",style:""}}},mounted:function(){var t=Object(n.a)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.currentNetwork=this.getParam("network")||this.network.default,t.next=3,this.initDapp();case 3:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),methods:{initDapp:function(){var t=Object(n.a)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.network.current=this.network.list[this.currentNetwork],t.prev=1,t.next=4,this.initWeb3(this.currentNetwork,!0);case 4:this.initContracts(),this.loading=!1,t.next=12;break;case 8:t.prev=8,t.t0=t.catch(1),alert(t.t0),document.location.href=this.$withBase("/");case 12:case"end":return t.stop()}},t,this,[[1,8]])}));return function(){return t.apply(this,arguments)}}(),ready:function(){this.currentToken.id=this.getParam("id"),this.getTokenVisibility()},getTokenVisibility:function(){var t=this;this.instances.token.isVisible(this.currentToken.id,function(e,r){if(e)return alert("Some error"),void(t.loading=!1);t.currentToken.visible=r[0],t.currentToken.visible||(t.currentToken.date=1e3*r[1].valueOf(),t.currentToken.formattedDate=new Date(t.currentToken.date).toLocaleString()),t.loading=!1})},getToken:function(){var t=this;this.$validator.validateAll().then(function(){var e=Object(n.a)(regeneratorRuntime.mark(function e(r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r)try{t.instances.token.getGift(t.currentToken.id,function(e,r){if(e)return alert("Some error"),void(t.loading=!1);t.formatStructure(r)})}catch(t){alert("Some error occurred. Check your Encryption Key")}case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}())},formatStructure:function(t){this.currentToken.amount=parseFloat(this.web3.fromWei(t[0])),this.currentToken.purchaser=t[1],this.currentToken.beneficiary=t[2],this.currentToken.content=JSON.parse(JSON.parse(this.web3.toAscii(this.decrypt(t[3],this.encryptionKey)))),this.currentToken.date=1e3*t[4].valueOf(),this.currentToken.formattedDate=new Date(this.currentToken.date).toLocaleString(),this.currentToken.style=t[5],this.currentToken.visible=!0,this.currentToken.loaded=!0}}},c=(r(192),r(4)),u=Object(c.a)(s,function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.loading?t._e():r("div",[r("b-row",[r("b-col",{attrs:{lg:"8","offset-lg":"2"}},[t.currentToken.visible?r("b-card",{staticClass:"shadow-lg",attrs:{"no-body":""}},[t.currentToken.loaded?[r("h4",{attrs:{slot:"header"},slot:"header"},[t._v("For "+t._s(t.currentToken.content.receiver))]),t._v(" "),r("b-card-body",[r("p",{staticClass:"card-test"},[t._v(t._s(t.currentToken.content.message))])]),t._v(" "),r("b-card-footer",[r("small",{staticClass:"text-muted"},[r("strong",[t._v(t._s(t.currentToken.amount)+" ETH")]),t._v(", From "),r("strong",[t._v(t._s(t.currentToken.content.sender))]),t._v(" on "),r("strong",[t._v(t._s(t.currentToken.formattedDate))])])])]:[r("b-card-body",[r("b-form",{on:{submit:function(e){return e.preventDefault(),t.getToken(e)}}},[r("b-form-group",{attrs:{id:"gift-encryption-key-group",label:"Encryption Key:","label-for":"gift-encryption-key",description:"Insert the Encryption Key"}},[r("b-form-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:{"is-invalid":t.errors.has("gift-encryption-key")},attrs:{id:"gift-encryption-key",name:"gift-encryption-key",type:"password"},model:{value:t.encryptionKey,callback:function(e){t.encryptionKey=e},expression:"encryptionKey"}})],1),t._v(" "),r("b-button",{attrs:{type:"submit",variant:"outline-success",size:"lg"}},[t._v("Decrypt your Gift")])],1)],1)]],2):r("b-card",{staticClass:"shadow-lg",attrs:{"no-body":""}},[r("b-card-body",[t.currentToken.date?r("p",{staticClass:"card-test"},[t._v("Gift will be visible on "+t._s(t.currentToken.formattedDate))]):r("p",{staticClass:"card-test"},[t._v("Gift doesn't exist")])])],1)],1)],1)],1)},[],!1,null,null,null);u.options.__file="GiftViewer.vue";e.default=u.exports}}]);